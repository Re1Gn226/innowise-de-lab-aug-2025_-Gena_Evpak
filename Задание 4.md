UPDATE
	Employees
SET
	salary = salary * 1.1
WHERE
	Department = 'HR'; -- увечиливаем зарплату сотрудников HR на 10%

UPDATE
	Employees
SET
	department = 'Senior IT'
WHERE	
	Salary > 70000.00; -- обновляем департамент сотрудников, зарплата которых выше 70к

DELETE
	e
FROM
	Employees e
LEFT JOIN employeeProjects ep ON
	e.EmployeeID = ep.EmployeeID
WHERE
	ep.EmployeeID IS NULL
	AND e.Department NOT IN ('HR', 'Senior IT'); -- удаляем сотрудников, которые не назначены ни на один проект
	
BEGIN; --CTE добавляем проект Project и выводим его
WITH new_proj AS(
	INSERT INTO Projects(ProjectName, Budget, StartDate, EndDate)
	VALUES ('wowowowoo', 100000.00, '2025-05-17', '2025-06-17')
	RETURNING projectID
	) --вставляем связи сотрудников с новым проектом
	INSERT
	INTO
	EmployeeProjects(EmployeeID, ProjectID, HoursWorked) --назначаем сотрудников на новый проект с разным кол-вом часов
	SELECT
	2,
	ProjectID,
	100
FROM
	new_proj
UNION ALL 
	SELECT
	3,
	projectID,
	120
FROM
	new_proj;

COMMIT; -- фиксируем изменения
